[{"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\index.js":"1","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\reportWebVitals.js":"2","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\App.js":"3","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\hooks\\useAuth.js":"4","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\components\\NavBar.js":"5","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\components\\HeaderLeft.js":"6","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\components\\MessageTime.js":"7","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\components\\MessageBlock.js":"8","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\components\\LogoutButton.js":"9","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\routes.js":"10","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\components\\PrivateRoute.js":"11","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\index.js":"12","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Profile\\index.js":"13","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\functions\\callApiHttp.js":"14","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\components\\AuthRoute.js":"15","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\hooks\\useUser.js":"16","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Friend\\index.js":"17","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\hooks\\useFriend.js":"18","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\components\\ListConversations.js":"19","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\components\\Conversation.js":"20","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\components\\SearchResultBlock.js":"21","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\components\\ContainerMain.js":"22","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\commons\\constants.js":"23","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\commons\\socketEvents.js":"24","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\functions\\formatTime.js":"25","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\index.js":"26","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\Main\\index.js":"27","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\Main\\Header\\index.js":"28","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\Main\\Detail\\index.js":"29","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\Main\\Body\\index.js":"30","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\Main\\hooks\\index.js":"31","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Header\\index.js":"32","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Header\\components\\IconButton.js":"33","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Body\\index.js":"34","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Body\\ListSearchUsers.js\\index.js":"35","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Body\\hooks\\index.js":"36","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Body\\ListConversations\\index.js":"37","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Body\\ListSearchUsers.js\\SearchUserElement\\index.js":"38","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Body\\ListConversations\\ConversationElement\\index.js":"39","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Landing\\index.js":"40","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\NotFound\\index.js":"41","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Home\\index.js":"42","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Login\\index.js":"43","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Signup\\index.js":"44","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\MessageRedirect\\index.js":"45","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\Main\\Footer\\index.js":"46","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\hooks\\useSocket.js":"47"},{"size":500,"mtime":1612690206302,"results":"48","hashOfConfig":"49"},{"size":362,"mtime":499162500000,"results":"50","hashOfConfig":"49"},{"size":2165,"mtime":1614421143446,"results":"51","hashOfConfig":"49"},{"size":1057,"mtime":1614421694869,"results":"52","hashOfConfig":"49"},{"size":695,"mtime":1614396964557,"results":"53","hashOfConfig":"49"},{"size":1053,"mtime":1614240549298,"results":"54","hashOfConfig":"49"},{"size":182,"mtime":1613060268655,"results":"55","hashOfConfig":"56"},{"size":783,"mtime":1614411724239,"results":"57","hashOfConfig":"49"},{"size":401,"mtime":1613999784016,"results":"58","hashOfConfig":"49"},{"size":1199,"mtime":1614351109617,"results":"59","hashOfConfig":"49"},{"size":750,"mtime":1614346781246,"results":"60","hashOfConfig":"49"},{"size":673,"mtime":1614390676635,"results":"61","hashOfConfig":"49"},{"size":1731,"mtime":1614060798717,"results":"62","hashOfConfig":"49"},{"size":403,"mtime":1614182759869,"results":"63","hashOfConfig":"49"},{"size":735,"mtime":1613975890707,"results":"64","hashOfConfig":"49"},{"size":1380,"mtime":1613996093685,"results":"65","hashOfConfig":"49"},{"size":5383,"mtime":1614061352660,"results":"66","hashOfConfig":"49"},{"size":1683,"mtime":1613999765306,"results":"67","hashOfConfig":"49"},{"size":2565,"mtime":1614305920324,"results":"68","hashOfConfig":"49"},{"size":1646,"mtime":1614228822912,"results":"69","hashOfConfig":"49"},{"size":974,"mtime":1614222415278,"results":"70","hashOfConfig":"49"},{"size":5477,"mtime":1614308365553,"results":"71","hashOfConfig":"49"},{"size":95,"mtime":1614138908522,"results":"72","hashOfConfig":"49"},{"size":122,"mtime":1614146154465,"results":"73","hashOfConfig":"49"},{"size":517,"mtime":1614236872502,"results":"74","hashOfConfig":"49"},{"size":393,"mtime":1614362524422,"results":"75","hashOfConfig":"49"},{"size":981,"mtime":1614395533796,"results":"76","hashOfConfig":"49"},{"size":1343,"mtime":1614413809076,"results":"77","hashOfConfig":"49"},{"size":1952,"mtime":1614314667796,"results":"78","hashOfConfig":"49"},{"size":686,"mtime":1614411715103,"results":"79","hashOfConfig":"49"},{"size":3799,"mtime":1614419280646,"results":"80","hashOfConfig":"49"},{"size":954,"mtime":1614414367614,"results":"81","hashOfConfig":"49"},{"size":274,"mtime":1614353086686,"results":"82","hashOfConfig":"49"},{"size":1992,"mtime":1614353210139,"results":"83","hashOfConfig":"49"},{"size":539,"mtime":1614344317723,"results":"84","hashOfConfig":"49"},{"size":1155,"mtime":1614395750587,"results":"85","hashOfConfig":"49"},{"size":1659,"mtime":1614414468314,"results":"86","hashOfConfig":"49"},{"size":988,"mtime":1614359321954,"results":"87","hashOfConfig":"49"},{"size":1664,"mtime":1614359287346,"results":"88","hashOfConfig":"49"},{"size":252,"mtime":1614350395817,"results":"89","hashOfConfig":"49"},{"size":274,"mtime":1614350554958,"results":"90","hashOfConfig":"49"},{"size":276,"mtime":1614350669429,"results":"91","hashOfConfig":"49"},{"size":2562,"mtime":1614352483188,"results":"92","hashOfConfig":"49"},{"size":1112,"mtime":1614350463482,"results":"93","hashOfConfig":"49"},{"size":1086,"mtime":1614396054868,"results":"94","hashOfConfig":"49"},{"size":2381,"mtime":1614413791691,"results":"95","hashOfConfig":"49"},{"size":952,"mtime":1614421754931,"results":"96","hashOfConfig":"49"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},"3m006v",{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"104","messages":"105","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"113"},"1hyjjjq",{"filePath":"114","messages":"115","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"123"},{"filePath":"124","messages":"125","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"126","messages":"127","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"128","messages":"129","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"130","messages":"131","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"123"},{"filePath":"132","messages":"133","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"134","messages":"135","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"136","messages":"137","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"138","messages":"139","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"140","usedDeprecatedRules":"141"},{"filePath":"142","messages":"143","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"141"},{"filePath":"144","messages":"145","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"146"},{"filePath":"147","messages":"148","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"149","messages":"150","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"151","messages":"152","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"153","messages":"154","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"155","messages":"156","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"157","messages":"158","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"159","messages":"160","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"161","messages":"162","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"163","messages":"164","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"165","messages":"166","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"167","usedDeprecatedRules":"99"},{"filePath":"168","messages":"169","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"170","messages":"171","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"172","messages":"173","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"174","messages":"175","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"176","messages":"177","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"178","messages":"179","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"180","messages":"181","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"182","messages":"183","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"184","messages":"185","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"186","messages":"187","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"188","messages":"189","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"190","messages":"191","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"192","messages":"193","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"194","messages":"195","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"196","messages":"197","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"99"},{"filePath":"198","messages":"199","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\index.js",[],["200","201"],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\reportWebVitals.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\App.js",["202","203"],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\hooks\\useAuth.js",["204","205","206"],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\components\\NavBar.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\components\\HeaderLeft.js",[],["207","208"],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\components\\MessageTime.js",[],["209","210"],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\components\\MessageBlock.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\components\\LogoutButton.js",[],["211","212"],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\routes.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\components\\PrivateRoute.js",[],["213","214"],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Profile\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\functions\\callApiHttp.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\components\\AuthRoute.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\hooks\\useUser.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Friend\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\hooks\\useFriend.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\components\\ListConversations.js",["215","216"],"import React, { useEffect, useState } from 'react'\r\nimport Conversation from './Conversation'\r\nimport callApiHttp from 'functions/callApiHttp'\r\nimport { Redirect, useParams } from 'react-router-dom'\r\nimport { useAuth } from 'hooks/useAuth'\r\nimport { RECEIVE_MESSAGE } from 'commons/socketEvents'\r\n\r\nconst ListConversations = () => {\r\n    const [listConversations, setListConversations] = useState([])\r\n    const { id } = useParams()\r\n    const { user, onSocket } = useAuth()\r\n    useEffect(() => {\r\n        const fetchListConversations = async () => {\r\n            const { data } = await callApiHttp({\r\n                method: \"GET\",\r\n                url: \"/conversation/\"\r\n            })\r\n            if (data.code === 1000) {\r\n                setListConversations(data.data)\r\n            } else {\r\n                alert(\"error\")\r\n            }\r\n        }\r\n        fetchListConversations()\r\n\r\n    }, [id])\r\n\r\n    // useEffect(() => {\r\n    //     onSocket(\"RECEIVE_CONVERSATION\", data => {\r\n    //         let templistConversations = [...listConversations]\r\n    //         console.log(\"update\", templistConversations.length)\r\n    //         let temp = templistConversations.indexOf(x => x._id === data.conversationId)\r\n    //         let add = {\r\n    //             id: data.conversationId,\r\n    //             messages: [data],\r\n    //             members: templistConversations[temp]?.members||[{\r\n    //                 _id: \"...loading\",\r\n    //                 username: \"...loading\",\r\n    //             }]\r\n    //         }\r\n    //         templistConversations.splice(temp, 1, add)\r\n    //         setListConversations([])\r\n    //     })\r\n    // }, [onSocket, setListConversations, listConversations])\r\n    return (\r\n        <div className=\"list-conversation\">\r\n            {listConversations?.length > 0 ? listConversations?.map((conversation, index) => {\r\n                conversation.members = conversation.members.filter(x => x._id !== user)\r\n                let tempMember = conversation.members[0]\r\n                let conversationName = tempMember.username || tempMember.email\r\n                let conversationId = tempMember._id\r\n                if (!id) return <Redirect to={`/message/${conversationId}`} key={index} />\r\n                return <Conversation conversation={conversation} conversationId={conversationId} conversationName={conversationName} key={index} firstMessage={conversation?.messages.slice(-1)[0]} />\r\n            }) : <i>You have no conversation</i>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ListConversations\r\n",["217","218"],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\components\\Conversation.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\components\\SearchResultBlock.js",[],["219","220"],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\components\\ContainerMain.js",["221"],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\commons\\constants.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\commons\\socketEvents.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\functions\\formatTime.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\Main\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\Main\\Header\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\Main\\Detail\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\Main\\Body\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\Main\\hooks\\index.js",["222","223","224","225","226","227","228"],"import React, { useContext, createContext, useState, useEffect, useRef } from \"react\";\r\n\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport { JOIN, SEND_MESSAGE } from 'commons/socketEvents'\r\nimport { useAuth } from 'hooks/useAuth';\r\nimport io from \"socket.io-client\";\r\n\r\nimport callApiHttp from 'functions/callApiHttp';\r\nimport { RECEIVE_MESSAGE } from 'commons/socketEvents'\r\nimport { useSocket } from \"hooks/useSocket\";\r\nimport { API_URL } from \"commons/constants\";\r\n\r\n\r\n\r\nconst mainContext = createContext();\r\n\r\nfunction ProvideMain({ children }) {\r\n    const main = useProvideMain();\r\n    return (\r\n        <mainContext.Provider value={main}>\r\n            {children}\r\n        </mainContext.Provider>\r\n    );\r\n}\r\n\r\nfunction useMain() {\r\n    return useContext(mainContext);\r\n}\r\n\r\nfunction useProvideMain() {\r\n    const [show, setShow] = useState(false)\r\n    const { id } = useParams()\r\n    // const { socketRef } = useSocket()\r\n    // let socket = socketRef.current\r\n\r\n    const user = localStorage.getItem(\"user_id\")\r\n    const [conversation, setConversation] = useState()\r\n    let userInfoRef = useRef()\r\n    let userInfo = userInfoRef.current\r\n    \r\n    const handleSubmitSendMessage = (e) => {\r\n        // console.log(object)\r\n        // socket.emit(SEND_MESSAGE, {\r\n        //     sender: user,\r\n        //     receiver: id,\r\n        //     message: {\r\n        //         kind: e ? \"text\" : \"react\",\r\n        //         content: e\r\n        //     },\r\n        //     conversationId: conversation?._id || \"\"\r\n        // })\r\n\r\n        setConversation(x => ({\r\n            ...x, messages: [...x.messages, {\r\n                kind: \"text\",\r\n                content: e,\r\n                sender: user\r\n            }]\r\n        }))\r\n        // setMessage(\"\")\r\n    }\r\n    console.log(\"render effect body main \", user, conversation, userInfo)\r\n\r\n    useEffect(() => {\r\n        let isSubscribed = true;\r\n        const fetchConversation = async () => {\r\n            try {\r\n                const { data } = await callApiHttp({\r\n                    method: \"GET\",\r\n                    url: \"/conversation/\" + id,\r\n                })\r\n                if (data.code === 1000) {\r\n                    if (data.data) {\r\n                        console.log(\"get conv\", data.data)\r\n                        const { member, conversations } = data.data\r\n                        !userInfoRef.current && isSubscribed && (userInfoRef.current = member)\r\n                        isSubscribed && setConversation(conversations)\r\n                    } else {\r\n                        isSubscribed && setConversation({})\r\n                        console.log(\"lost data\", data)\r\n                    }\r\n\r\n                } else {\r\n                    console.log(data.message)\r\n                }\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n        }\r\n        id && isSubscribed && fetchConversation()\r\n        return () => (isSubscribed = false)\r\n    }, [id])\r\n\r\n\r\n    useEffect(() => {\r\n        // conversation&&socketRef.current.emit(JOIN,\"hihi\")\r\n        // console.log(\"socket\", socket, id, conversation)\r\n        // if (!socket || !id || !conversation) return\r\n        // socket.emit(JOIN, \"aaa\")\r\n        // socket.on(RECEIVE_MESSAGE, data => {\r\n        //     console.log(\"id current: \", id, data)\r\n        //     data.sender === id && setConversation(x => ({ ...x, messages: [...x.messages, data] }))\r\n        // })\r\n        return () => {\r\n            // socket && socket.disconnect()\r\n        }\r\n    }, [id, conversation])\r\n\r\n\r\n\r\n    return {\r\n        show,\r\n        setShow,\r\n        conversation,\r\n        handleSubmitSendMessage,\r\n        userInfo\r\n        // message,\r\n        // setMessage\r\n    };\r\n}\r\n\r\nexport {\r\n    ProvideMain,\r\n    useMain,\r\n    useProvideMain,\r\n}","C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Header\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Header\\components\\IconButton.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Body\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Body\\ListSearchUsers.js\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Body\\hooks\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Body\\ListConversations\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Body\\ListSearchUsers.js\\SearchUserElement\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\LeftSection\\Body\\ListConversations\\ConversationElement\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Landing\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\NotFound\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Home\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Login\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Signup\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\MessageRedirect\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\pages\\Message\\Main\\Footer\\index.js",[],"C:\\Users\\giang\\Desktop\\mini-project-ftech-message\\src\\hooks\\useSocket.js",["229"],{"ruleId":"230","replacedBy":"231"},{"ruleId":"232","replacedBy":"233"},{"ruleId":"234","severity":1,"message":"235","line":22,"column":10,"nodeType":"236","messageId":"237","endLine":22,"endColumn":17},{"ruleId":"234","severity":1,"message":"238","line":23,"column":10,"nodeType":"236","messageId":"237","endLine":23,"endColumn":12},{"ruleId":"234","severity":1,"message":"235","line":1,"column":10,"nodeType":"236","messageId":"237","endLine":1,"endColumn":17},{"ruleId":"234","severity":1,"message":"239","line":3,"column":65,"nodeType":"236","messageId":"237","endLine":3,"endColumn":71},{"ruleId":"234","severity":1,"message":"238","line":4,"column":8,"nodeType":"236","messageId":"237","endLine":4,"endColumn":10},{"ruleId":"230","replacedBy":"240"},{"ruleId":"232","replacedBy":"241"},{"ruleId":"230","replacedBy":"242"},{"ruleId":"232","replacedBy":"243"},{"ruleId":"230","replacedBy":"244"},{"ruleId":"232","replacedBy":"245"},{"ruleId":"230","replacedBy":"246"},{"ruleId":"232","replacedBy":"247"},{"ruleId":"234","severity":1,"message":"248","line":6,"column":10,"nodeType":"236","messageId":"237","endLine":6,"endColumn":25},{"ruleId":"234","severity":1,"message":"249","line":11,"column":19,"nodeType":"236","messageId":"237","endLine":11,"endColumn":27},{"ruleId":"230","replacedBy":"250"},{"ruleId":"232","replacedBy":"251"},{"ruleId":"230","replacedBy":"252"},{"ruleId":"232","replacedBy":"253"},{"ruleId":"254","severity":1,"message":"255","line":78,"column":8,"nodeType":"256","endLine":78,"endColumn":28,"suggestions":"257"},{"ruleId":"234","severity":1,"message":"258","line":5,"column":10,"nodeType":"236","messageId":"237","endLine":5,"endColumn":14},{"ruleId":"234","severity":1,"message":"259","line":5,"column":16,"nodeType":"236","messageId":"237","endLine":5,"endColumn":28},{"ruleId":"234","severity":1,"message":"260","line":6,"column":10,"nodeType":"236","messageId":"237","endLine":6,"endColumn":17},{"ruleId":"234","severity":1,"message":"238","line":7,"column":8,"nodeType":"236","messageId":"237","endLine":7,"endColumn":10},{"ruleId":"234","severity":1,"message":"248","line":10,"column":10,"nodeType":"236","messageId":"237","endLine":10,"endColumn":25},{"ruleId":"234","severity":1,"message":"261","line":11,"column":10,"nodeType":"236","messageId":"237","endLine":11,"endColumn":19},{"ruleId":"234","severity":1,"message":"235","line":12,"column":10,"nodeType":"236","messageId":"237","endLine":12,"endColumn":17},{"ruleId":"234","severity":1,"message":"258","line":2,"column":10,"nodeType":"236","messageId":"237","endLine":2,"endColumn":14},"no-native-reassign",["262"],"no-negated-in-lhs",["263"],"no-unused-vars","'API_URL' is defined but never used.","Identifier","unusedVar","'io' is defined but never used.","'useRef' is defined but never used.",["262"],["263"],["262"],["263"],["262"],["263"],["262"],["263"],"'RECEIVE_MESSAGE' is defined but never used.","'onSocket' is assigned a value but never used.",["262"],["263"],["262"],["263"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'socket'. Either include it or remove the dependency array.","ArrayExpression",["264"],"'JOIN' is defined but never used.","'SEND_MESSAGE' is defined but never used.","'useAuth' is defined but never used.","'useSocket' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"265","fix":"266"},"Update the dependencies array to be: [id, user, onSocket, socket]",{"range":"267","text":"268"},[2880,2900],"[id, user, onSocket, socket]"]